<div class="wrapper">
    <div class="page-header page-header-xs" data-parallax="true"
    style="background-image: url('./assets/img/fabio-mangione.jpg');">
    <div class="filter"></div>
</div>
</div>
<div class="d-flex container">
    <nz-tabset>
        <nz-tab nzTitle="Quản lý đơn hàng">
            Content of Tab Pane 2
        </nz-tab>
        <nz-tab nzTitle="Quản lý sản phẩm">
            <button (click)="openModalCreate()" class="m-2">Thêm sản phẩm</button>
            <nz-table nzBordered #basicTable [nzData]="productTable" [nzFrontPagination]="false"
                [nzShowPagination]="false">
                <thead>
                    <tr>
                        <th>STT</th>
                        <th>Tên sản phầm</th>
                        <th>Danh mục</th>
                        <th>Ghi chú</th>
                        <th>Giá</th>
                        <th>Kích cỡ</th>
                        <th>Đường dẫn </th>
                        <th>Tình trạng </th>
                        <th>% khuyến mãi </th>
                        <th>Thao tác</th>

                    </tr>
                </thead>
                <tbody>
                    <tr *ngFor="let product of basicTable.data;let i = index">
                        <td>{{ i + 1 }}</td>
                        <td>{{ product.productName }}</td>
                        <td>{{ product.category }}</td>
                        <td>{{ product.note }}</td>
                        <td>{{ product.price }}</td>
                        <td>{{ product.size }}</td>
                        <td>{{ product.imgProduct }}</td>
                        <td>{{ product.status }}</td>
                        <td>{{ product.priceSale }}</td>

                        <td>
                            <button (click)='openModalUpdate(product)'>Chỉnh sửa</button>
                            <button (click)='openModalDelete(product)'>Xóa</button>
                        </td>
                    </tr>
                </tbody>
            </nz-table>
        </nz-tab>
     
        <nz-tab nzTitle="Cấu hình ảnh bìa">
            Content of Tab Pane 3
        </nz-tab>
    </nz-tabset>
</div>

<nz-modal [(nzVisible)]="isVisibleMiddle" nzTitle="{{titleModal}}" nzClosable='false' nzCentered
    (nzOnCancel)="handleCancelMiddle()" (nzOnOk)="handleOkMiddle(product)">
    <form [formGroup]="formProduct">
        <div class="d-flex">
            <label class="col-3 p-2">Tên sản phẩm</label>
            <input type="text" class="form-control" formControlName='productName' />
        </div>
        <div class="d-flex">
            <label class="col-3 p-2">Danh mục</label>
            <select class="form-control" formControlName='category'>
                <option>Quần</option>
                <option>Áo</option>
                <option>Áo khoác</option>
                <option>Phụ kiện</option>
            </select>
        </div>

        <div class="d-flex">
            <label class="col-3 p-2">Giá</label>
            <input type="number" class="form-control" formControlName='price' />
        </div>
        <div class="d-flex">
            <label class="col-3 p-2">Mô tả</label>
            <textarea class="form-control my-2 " formControlName='note'></textarea>
        </div>
        <div class="d-flex">
            <label class="col-3 p-2">Tình trạng</label>
            <select class="form-control" formControlName='status'>
                <option value='Còn hàng'>Còn hàng</option>
                <option value='Hết hàng'>Hết hàng</option>
                <option value='Best Seller'>Best Seller</option>
                <option value='Sale'> Sale</option>
            </select>
        </div>
        <div class="d-flex" *ngIf="formProduct.value.status === 'Sale'">
            <label class="col-3 p-2">Giá khuyến mãi</label>
            <input type="number" class="form-control" formControlName='priceSale' />
        </div>
        <div class="d-flex">
            <label class="col-3 p-2">Kích cỡ</label>
            <input type="text" class="form-control" formControlName='size' />
        </div>
        <div class="d-flex">
            <label class="col-3 p-2">Đường dẫn hình ảnh</label>
            <input type="file" formControlName='imgProduct' multiple accept=".jpg, .jpeg, .png">
        </div>
    </form>
</nz-modal>
<nz-modal [(nzVisible)]="isVisibleDelete" nzClosable='false' nzTitle="Yêu cầu xác nhận ?" nzCentered
    (nzOnCancel)="handleCancelMiddle()" (nzOnOk)="deleteProduct(product._id)">
    Bạn chắc chắn muốn Xóa <strong>{{product?.productName}}</strong>?
</nz-modal>